!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Weather"),Weather.API=function(){function a(){}return a.getCurrentConditions=function(a,b){var c;return c=this.generateUrl(a),$.get(c,function(a){return b(a.current_observation),a},"jsonp")},a.generateUrl=function(a){return"http://api.wunderground.com/api/"+this.key+"/conditions/q/"+a+".json"},a}()}.call(this),function(){namespace("Weather"),Weather.Controller=function(){function a(){}return a.bind=function(){return $("[data-id=weather-button]").click(function(a){return function(){return a.getCurrentWeather(Weather.View.getInput())}}(this))},a.getCurrentWeather=function(a){return Weather.API.getCurrentConditions(a,Weather.View.showWeather)},a.setupWidgetIn=function(a,b){return Weather.View.displayFormIn(a),Weather.API.key=b,this.bind()},a}()}.call(this),function(){namespace("Weather"),Weather.Template=function(){function a(){}return a.renderForm=function(){return _.template('<input name="weather-search" type="text"><br>\n<button id="weather" data-id="weather-button">Get current weather</button><br>\n<div data-id="weather-output"></div>')},a.renderCurrentConditions=function(a){return _.template("<p><%= display_location.full %> <%= temp_f %>&deg; F</p>\n<p><%= weather %></p>\n<p><img src='<%= icon_url %>'></p>",a)},a}()}.call(this),function(){namespace("Weather"),Weather.View=function(){function a(){}return a.getInput=function(){return $("[name=weather-search]").val()},a.showWeather=function(a){var b;return b=Weather.Template.renderCurrentConditions(a),$("[data-id=weather-output]").html(b)},a.displayFormIn=function(a){var b;return b=Weather.Template.renderForm(),$(a).html(b)},a}()}.call(this);