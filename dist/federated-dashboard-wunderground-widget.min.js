!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Weather"),Weather.API=function(){function a(){}return a.getCurrentConditions=function(a,b){var c;return c=this.generateUrl(a),$.get(c,function(a){return b.showCurrentWeather(a.current_observation),a},"jsonp")},a.generateUrl=function(a){return"http://api.wunderground.com/api/"+a.key+"/conditions/q/"+a.zipcode+".json"},a}()}.call(this),function(){namespace("Weather"),Weather.Controller=function(){function a(){}return a.widgets=[],a.setupWidgetIn=function(a,b){var c;return c=new Weather.Widget.Controller(a,b),c.initialize(),this.addToWidgetsContainer(c)},a.addToWidgetsContainer=function(a){return this.widgets.push(a)},a.getWidgets=function(){return this.widgets},a.hideForms=function(){return this.allWidgetsExecute("hideForm")},a.showForms=function(){return this.allWidgetsExecute("showForm")},a.allWidgetsExecute=function(a){return _.each(this.widgets,function(b){return b[a]()})},a}()}.call(this),function(){namespace("Weather"),Weather.Display=function(){function a(){}return a.logoSrc="https://raw.githubusercontent.com/bwvoss/federated-dashboard-wunderground-widget/master/lib/icon_7747/weather_icon.png",a.generateLogo=function(a){var b;return b=this.logoSrc,_.extend(a,{imgSrc:b}),Weather.Templates.renderLogo(a)},a}()}.call(this),function(){namespace("Weather"),Weather.Templates=function(){function a(){}return a.renderForm=function(){return _.template('<div class="widget" data-id="weather-widget-wrapper">\n  <div class="widget-header">\n    <h2 class="widget-title">Weather</h2>\n    <div class="widget-form" data-id="weather-form">\n      <input name="weather-search" type="text" autofocus="true">\n      <button id="weather" data-id="weather-button">Get current weather</button><br>\n    </div>\n  </div>\n  <div class="widget-body" data-id="weather-output"></div>\n</div>')},a.renderCurrentConditions=function(a){return _.template("<p><%= display_location.full %> <%= temp_f %>&deg; F</p>\n<p><%= weather %></p>\n<p><img src='<%= icon_url %>'></p>",a)},a.renderLogo=function(a){return _.template("<img src='<%= imgData['imgSrc'] %>' data-id='<%= imgData['dataId'] %>' style='width: <%= imgData['width'] %>px'/>",{imgData:a})},a}()}.call(this),function(){namespace("Weather.Widget"),Weather.Widget.Controller=function(){function a(a,c){b=c,this.container=a,this.display=new Weather.Widget.Display(a)}var b;return b=void 0,a.prototype.initialize=function(){return this.display.setupWidget(),this.bind()},a.prototype.getContainer=function(){return this.container},a.prototype.bind=function(){return $(""+this.container+" [data-id=weather-button]").click(function(a){return function(){return a.processClickedButton()}}(this))},a.prototype.processClickedButton=function(){var a,c;return a=this.display.getInput(),c={key:b,zipcode:a},Weather.API.getCurrentConditions(c,this.display)},a.prototype.hideForm=function(){return this.display.hideForm()},a.prototype.showForm=function(){return this.display.showForm()},a}()}.call(this),function(){namespace("Weather.Widget"),Weather.Widget.Display=function(){function a(a){this.container=a}return a.prototype.setupWidget=function(){var a;return a=Weather.Templates.renderForm(),$(this.container).append(a)},a.prototype.getInput=function(){return $(""+this.container+" [name=weather-search]").val()},a.prototype.showCurrentWeather=function(a){var b;return b=Weather.Templates.renderCurrentConditions(a),$(""+this.container+" [data-id=weather-output]").html(b)},a.prototype.hideForm=function(){return $(""+this.container+" [data-id=weather-form]").hide()},a.prototype.showForm=function(){return $(""+this.container+" [data-id=weather-form]").show()},a}()}.call(this),function(){}.call(this);